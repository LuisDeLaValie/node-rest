version: '3'

services:

  web-server:
    build: .
    container_name: node_web
    volumes:
      - .:/app
      - /app/node_modules
    ports:
      - 3001:3000
    environment:
      - NODE_ENV=development
    command: ["npx","nodemon","--legacy-watch","app.js"]

  db:
    image: mysql:8.1.0
    container_name: db_node_web
    volumes:
      - mysql_data:/var/lib/mysq
    expose:
      - 3306
    ports:
      - 3307:3306
    environment:
      - MYSQL_ROOT_PASSWORD=12345
      - MYSQL_DATABASE=biblioteca
      - MYSQL_USER=user_biblioteca
      - MYSQL_PASSWORD=54321

volumes:
  mysql_data: